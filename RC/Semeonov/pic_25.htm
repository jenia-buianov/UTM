<HTML><HEAD>
<!-- Meta http equivalent was here                                     -->
<META NAME="keywords" CONTENT="DCT 
MMR 
GoB 
MPEG








">
<TITLE>2.5 Методы преобразования и передачи изображения</TITLE>
</HEAD>
<BODY background="gainsboro" tppabs="http://book.itep.ru/gainsboro" link="#0000FF">

<center>
<table BORDER="0" CELLSPACING="1" CELLPADDING="5" bgcolor="ghostwhite">
  <tr>
    <td VALIGN="TOP" bgcolor="steelblue" LINK="#0000FF"><p align="center">

<A HREF="voic_243.htm" tppabs="http://book.itep.ru/2/24/voic_243.htm">  <IMG ALIGN=BOTTOM ALT="previous" SRC="k_prev.jpg" tppabs="http://book.itep.ru/k_prev.jpg"></A>


<A HREF="sound_24.htm" tppabs="http://book.itep.ru/2/24/sound_24.htm">   <IMG ALIGN=BOTTOM ALT="up"   SRC="k_up.jpg" tppabs="http://book.itep.ru/k_up.jpg"></A>


<A HREF="comp_26.htm" tppabs="http://book.itep.ru/2/26/comp_26.htm"><IMG ALIGN=BOTTOM ALT="down" SRC="k_down.jpg" tppabs="http://book.itep.ru/k_down.jpg"></A>


<A HREF="mpeg-4R.htm" tppabs="http://book.itep.ru/2/25/mpeg-4R.htm"><IMG ALIGN=BOTTOM ALT="next" SRC="k_next.jpg" tppabs="http://book.itep.ru/k_next.jpg"></A>

<A HREF="intro1.htm" tppabs="http://book.itep.ru/1/intro1.htm">  <IMG ALIGN=BOTTOM ALT="index" SRC="k_indx.jpg" tppabs="http://book.itep.ru/k_indx.jpg"></A>
<BR>

<B> <FONT COLOR="white">Previous: </FONT></B>
<A HREF="voic_243.htm" tppabs="http://book.itep.ru/2/24/voic_243.htm"><FONT COLOR="lightblue">2.4.3 Передача голоса по каналам Интернет</FONT></A>


<B><FONT COLOR="white">&nbsp;&nbsp; UP:</FONT> </B>
<A HREF="sound_24.htm" tppabs="http://book.itep.ru/2/24/sound_24.htm"><FONT COLOR="lightblue">2.4 Методы    преобразования и передачи звуковых сигналов</FONT></A>
<BR>


<B><FONT COLOR="white"> Down:</FONT></B>
<A HREF="comp_26.htm" tppabs="http://book.itep.ru/2/26/comp_26.htm"><FONT COLOR="lightblue">2.6 Методы сжатия информации</FONT></A><BR>


<B><FONT COLOR="white">&nbsp; &nbsp; Next:</FONT></B>
<A HREF="mpeg-4R.htm" tppabs="http://book.itep.ru/2/25/mpeg-4R.htm"><FONT COLOR="lightblue">2.5.1 Стандарт MPEG-4</FONT></A>

</TD></TR>
<TR><TD ALIGN=CENTER>   
<FONT color="#0000FF" size=6><B>2.5 Методы преобразования и передачи изображения</B></FONT><br>
<FONT size=3>Семенов Ю.А. (ГНЦ ИТЭФ)</FONT></p>

</TD></TR>
<TR><TD>
<!--new-->
<P ALIGN="CENTER"><IMG SRC="serra.gif" tppabs="http://book.itep.ru/2/25/serra.gif"></P>

<P ALIGN="justify">Передача изображения представляет собой наиболее тяжелую проблему, так как человеческий глаз с информационной точки зрения несравненно совершеннее уха.</p>

<p align="justify">В 1902 году Артур Корн (Германия) запатентовал систему фотоэлектрического сканирования изображения, а в 1910 году заработала первая международная факсимильная связь Берлин-Париж-Лондон. До 60-х годов этого века рынок факсимильной аппаратуры был ограничен.</p>

<p align="justify">В 1968 году CCITT разработала рекомендации по факсимильному оборудованию, которое было способно передавать страницу за 6 минут при разрешении 3.85 линий на мм. Позднее в 1976 году аналоговая факсимильная техника была улучшена. Это позволило сократить время передачи страницы до 3 минут. В 1980 году разработан стандарт для цифровых факс-машин (группа 3), здесь уже предусматривается сжатие информации, что позволяет сократить время передачи страницы до 1 мин при скорости передачи 4800 бит/с. Следует иметь в виду, что сжатие информации в сочетании с ошибками пересылки может приводить к неузнаваемости изображения локальному или полному. По этой причине число линий сканирования, которые используются при обработке изображения, с целью сжатия может варьироваться (1-4) и определяется в результате диалога между отправителем и получателем, а передача каждой скан-линии завершается довольно длинным кодом, предназначенным для надежного распознавания завершения строки сканирования, а также коррекции ошибок. Факсимильное оборудование группы 3 может и не обеспечивать сжатия передаваемых (принимаемых) данных. В 1984 году разработаны требования к факс-аппаратам группы 4. Система базируется на двухмерной системе кодирования изображения (MMR - Modified Modified Reed).</p>

<p align="justify">Факсимильное оборудование поделено на 4 группы. Первая группа практически совпадает с традиционным фототелеграфным оборудованием (6 минут на страницу при разрешении 3.85 линий на миллиметр). Динамической вариации кодовой таблицы не предусмотрено. При этом для кодирования очередной линии сканирования используются результаты, полученные для предшествующей 
линии. Следует учитывать, что зона сканирования факс-машины больше размера изображения и всегда имеются пустые строки и поля, что предоставляет дополнительные возможности для сжатия передаваемой информации. Существует три режима кодирования: вертикальный, горизонтальный и проходной. Последний 
режим реализуется, когда позиция в эталонной строке <b>a2</b> находится слева от <b>b1</b> (см. рис. 2.5.1; вериткальному и горизонтальному режиму соответствует нижняя часть рисунка). При “<b>вертикальном</b>” режиме кодирования (a2 справа от b1 и <b>|b1a1|<= 3</b>) позиция <b>b1</b> кодируется относительно позиции <b>a1</b>. Относительное положение <b>b1a1</b> может 
принимать одно из семи значений V(0), V<sub>R</sub>(1), V<sub>R</sub>(2), V<sub>R</sub>(3), V<sub>L</sub>(1), v<sub>L</sub>(2) и V<sub>L</sub>(3) (см. табл. 2.5.1). Индексы r и l указывают на то, что <b>b1</b> находится справа или слева по отношению к <b>a1,</b> а число в скобках обозначает расстояние <b>b1a1</b>. Если используется “<b>горизонтальный</b>” режим кодирования 
(a2 справа от b1 и <b>|b1a1|>3</b>), длины <b>b0b1</b> и <b>b1b2</b> отображаются с помощью кодовой комбинации H+M(b0b1)+M(b1b2). H представляет собой код 001, взятый из двумерной кодовой таблицы. M(b0b1) и M(b1b2) являются кодовыми словами, которые характеризуют длину и цвет субстрок b0b1 и b1b2 соответственно. </p>

<p align="center"><img src="image77.gif" tppabs="http://book.itep.ru/2/25/image77.gif"></p>
<p align="center">Рис. 2.5.1. Режимы кодирования: проходной; вертикальный; горизонтальный</p>

<p align="justify">Факс-оборудование группы 4 может поддерживать так называемый расширенный режим, когда часть рабочего поля кодируется без использования алгоритмов уплотнения информации (как правило, это участки, где попытка сжать либо ничего не дает, либо даже приводит к увеличению объема передаваемых данных). Оборудование этой группа использует на канальном уровне процедуры 
HDLC LAPB. Рекомендуемой полосой пропускания канала, к которому подключается такое оборудование, является 64 Кбит/с.</p>

<p align="center">Таблица 2.5.1. Кодирование элементов изображения</p>
<center> <table border=10 cellspacing=2 cellpadding=5 width=756 bgcolor="ghostwhite">
<tr><td width="22%" valign="top" bgcolor="gainsboro"><b><p align="justify">Режим кодирования</b></td>
<td width="31%" valign="top" bgcolor="gainsboro"><b><p align="justify">Элементы, подлежащие кодированию</b></td>
<td width="19%" valign="top" bgcolor="gainsboro"><b><p align="justify">Обозначение</b></td>
<td width="28%" valign="top" bgcolor="gainsboro"><b><p align="justify">Код</b></td>
</tr>
<tr><td width="22%" valign="top"><p align="justify">Проход</td>
<td width="31%" valign="top"><p align="justify">a1a2</td>
<td width="19%" valign="top"><p align="center">p</td>
<td width="28%" valign="top"><p align="justify">0001</td>
</tr>
<tr><td width="22%" valign="top"><p align="justify">Горизонтальный</td>
<td width="31%" valign="top"><p align="justify">b0b1,b1b2</td>
<td width="19%" valign="top"><p align="center">h</td>
<td width="28%" valign="top"><p>001+m(b0b1)+m(b1b2)</td>
</tr>
<tr><td width="22%" valign="top"><p align="justify">Вертикальный</td>
<td width="31%" valign="top"><p align="justify">b1 под a1 b1a1=0<br>
b1 справа от a1 b1a1=1<br>
b1a1=2<br>
b1a1=3<br>
b1 слева от a1 b1a1=1<br>
b1a1=2</p>
b1a1=3</td>
<td width="19%" valign="top"><p align="center">v(0)<br>
v<sub>r</sub>(1)<br>
v<sub>r</sub>(2)<br>
v<sub>r</sub>(3)<br>
v<sub>l</sub>(1)<br>
v<sub>l</sub>(2)<br>
v<sub>l</sub>(3).</td>
<td width="28%" valign="top"><p align="justify">1<br>
011<br>
000011<br>
0000011<br>
010<br>
000010<br>
0000010<br>
0000001ххх</td>
</tr>
</table></center> 

<p align="justify">Перед началом передачи терминалы должны обменяться своими идентификаторами (TID - terminal identification). В последнее время появились факс-аппараты, которые печатают изображение на обычную бумагу с разрешением 300-400 точек на дюйм. Такая схема удобна, но имеет некоторые недостатки. Такие аппараты дороги, печать может начаться не ранее, чем будет передана вся страница; передающий аппарат может иметь более низкое разрешение, нужно уметь адаптироваться к любому разрешению, что приводит к тому, что скорость печати изображения при низком разрешении остается столь же низкой, как и при высокой.</p>

<p align="justify">В 1970 году в Бритиш Телеком были разработаны основные принципы еще одного вида передачи графической информации - телетекста, первые опыты по его внедрению относятся к 1979 году. Стандарт на мозаичное представление символов был принят CEPT в 1983 году. Каждому символу ставится 
в соответствие код длиной в 7-8 бит. На экране такой символ отображается с помощью специального знакового генератора, использующего таблицу.</p>

<p align="justify">Полному экрану видео текста, содержащему 24 строки по 40 символов, соответствует 960 байт, для передачи которых по коммутируемой телефонной сети требуется 6,4 секунды. D-канал ISDN может пропустить эту информацию за 1 сек, а B-канал быстрее за 0,1 сек. Телетекст позволяет 
более эффективно использовать каналы связи и не налагает чрезмерных требований на устройства отображения. </p>

<p align="justify">Известно, что для корректной передачи цвета требуется 16 миллионов оттенков (8 бит на каждую из трех цветовых компонент). Таким образом, для описания картинки на экране, содержащей 575 линий по 720 пикселей, требуется 1,240 Мбайта. Для передачи такой информации по B-каналу ISDN, если не используется сжатие, потребуется около 2,5 минут. Эта цифра помогает понять 
актуальность проблемы сжатия графической информации. При передаче чисто текстовой информации электронная почта имеет по этой причине абсолютное преимущество перед факсом. В перспективе можно ожидать внедрения сжатия информации при передаче почтовых сообщений с последующей дешифровкой 
данных принимающей стороной. Первым шагом на этом пути является внедрение системы MIME. Такое усовершенствование электронной почты сделает ее еще более грозным конкурентом факс-машин. Ведь передача графических образов уже не является монополией факсимильных систем, а возможность шифрования почтовых сообщений (например, в PGP) делает электронную почту более противостоящей 
перехвату. Таким образом, чтобы выдержать конкуренцию со стороны электронной почты разработчикам факс-систем нужно упорно работать.</p>

<p align="justify">Стандарты для представления и передачи изображения разрабатывает Joint Photographic Expert Group (JPEG). Для сжатия графической информации в настоящее время используется дискретное косинусное двухмерное преобразование (DCT - Discrete Cosine Transform), которое дает 
субъективно наилучший результат и описывается уравнением:</p>

<p align="justify"><img src="image78.gif" tppabs="http://book.itep.ru/2/25/image78.gif"><img src="image79.gif" tppabs="http://book.itep.ru/2/25/image79.gif">	[2.5.1]</p>

<p align="justify">где <b>v</b> - горизонтальная координата графического блока, <b>u</b> - вертикальная, <b>x</b> - вертикальная координата внутри блока, а <b>y</b> - горизонтальная координата внутри блока, <b>C(u), C(v)  = 1/<sub><img src="image80.gif" tppabs="http://book.itep.ru/2/25/image80.gif">
</sub></b> для <b>u,v</b> = 0 и <b>С(u), С(v) = 1</b> в противном случае. Два члена в квадратных скобках являются ядрами преобразования, показанными ниже на рис. 2.5.2, а <b>p(x,y)</b> представляет собой пиксельные данные блока реального рисунка. Начало координат в обоих случаях в верхнем левом углу. Процесс кодирования сводится к разбиению изображения на блоки 8*8 пикселей и 
выполнению процедуры двухмерного DCT для каждого из этих блоков. Полученные коэффициенты преобразования дискретизируются. 64 числа, характеризующие уровень сигнала, превращаются в 64 коэффициента преобразования (амплитуды пространственных частот), которые хорошо поддаются процедуре сжатия. Дискретизатор округляет коэффициенты, эта процедура вносит некоторые ошибки, но 
обратное преобразование на принимающей стороне за счет усреднения частично устраняет вносимые искажения. На практике дискретизатор реализует несколько более сложный алгоритм.</p>

<p align="justify">Интуитивно метод DCT базируется на выявлении того, насколько вышестоящий блок отличается от нижестоящего. Для реального представления (сжатия) коэффициентов преобразования здесь также используются коды Хафмана.</p>

<p align="center"><img src="image81.gif" tppabs="http://book.itep.ru/2/25/image81.gif"></p>
<p align="center">Рис. 2.5.2. Графическое представление двухмерного преобразования по формуле [2.5.1]</p>

<p align="justify">DCT обеспечивает сжатие на уровне 0.5-1.0 бит/пиксель при хорошем качестве изображения. Сжатие требует времени, а максимально приемлемым временем задержки при пересылке изображения является 5 секунд. На рис. 2.5.3 приведена качественная оценка четкости и соответствия оригиналу изображения в зависимости от величины сжатия (DCT). Если использовать скорость обмена 64 
кбит/с, то степени сжатия 0,01 бита на пиксель будет соответствовать время передачи изображения 0,04 секунды, а сжатию 10 - время передачи 40сек.</p>

<p align="center"><img src="picture.jpg" tppabs="http://book.itep.ru/2/25/picture.jpg"></p>
<p align="center">Рис. 2.5.3.  Качество DCT-изображения для различных значений сжатия информации (картинка имеет разрешение 512*512 пикселей; заполненные квадратики соответствуют цветному изображению, а незаполненные - черно-белому)</p>

<p align="justify">Отображение графического образа может выполняться последовательно (примерно так, как мы читаем текст: слева-направо и сверху-вниз) или с использованием прогрессивного кодирования (сначала передается вся картинка с низким разрешением, затем последовательно четкость изображения 
доводится до максимальной). Последний метод весьма удобен для систем WWW, где просмотрев изображение низкого разрешения, можно отменить передачу данных улучшающих четкость и тем самым сэкономить время. Хорошо распознаваемое изображение получается при сжатии порядка 0,1 бита на пиксель.</p>

<p align="justify">Проблема сжатия и передачи движущегося изображения еще сложнее. Алгоритм кодирования такого изображения описан в рекомендациях CCITT H.261 и предполагает, что скорость передачи при этом лежит в интервале 40кбит/с - 2Мбит/с. Следует иметь в виду, что видео телефония и видеоконференции требуют синхронной передачи звука и изображения (стандарт H.221, например 46,4 Кбит/с для видео и 16 Кбит/с для звука). Нормальный формат телевидения имеет 625 и 525 строк развертки и частоту кадров 25-30 в секунду. Цветное телевидение использует сигналы R (red), G (green) и B (blue), причем яркость луча (y) определяется соотношением: <b>Y = 0.30R + 0.59G + 
0.11B </b>(при отображении белого цвета). Информация о цветах определяется формулами: <b>С<sub>B</sub> = B - Y</b> и <b>C<sub>R</sub> = R - Y</b>. Зная величины y, C<sub>B</sub> и С<sub>R</sub>, можно восстановить значения R, G и B. При сжатии цветного изображения учитывается тот факт, что человеческий глаз извлекает большую часть информации из контуров предметов, а не из 
цветных деталей. Например в рекомендации CCIR 601 предлагается использовать полосу 13.5 Мгц для кодирования Y и только по 6.75 Мгц для <b>С<sub>B</sub> </b> и <b>C<sub>R.</b></sub> Такая схема требует 216 Мбит/с, что в 3375 раза превышает возможности стандартного 64кбит/с B-канала ISDN<b>. 
</b>Приемлемыми решениями могут быть: </p>

<ol type=a><li> снижение числа строк до 288 (формат 625 строк) для отображения яркости; </li>
<li> использование максимально возможного сжатия графических данных; </li>
<li> повышение пропускной способности канала. Для разрешение по горизонтали вполне достаточно 3 Мгц. Рекомендация 601 требует 720 пикселей для яркости и 360 для каждой из составляющих цветов. В настоящее время используется стандарт CIF (Common Intermediate Format). Для некоторых приложений рекомендовано вдвое более низкое разрешение по каждой из осей (quarter CIF). PCM-кодирование CIF с 
8 битами на пиксель требует 352х288х(1+1/4+1/4)х29.97х8 = 36.5 Мбит/с.</li></ol>

<p align="justify">Проблема сжатия информации была, есть и всегда будет актуальной. При известных современных методах, чем больше эффективность сжатия - больше задержка (наилучший результат можно получить, используя сжатие всего фильма, чем кадра или тем более строки). В каждом конкретном случае выбирается то или иное компромиссное решение. При работе в реальном масштабе времени, где 
в процессе обмена участвует человек, задержки более секунды вызывают раздражение, и приходится ограничиваться сравнительно скромными коэффициентами сжатия.</p>

<p align="justify">При пересылке движущегося изображения производится сравнение текущего кадра с предшествующим. Если кадры идентичны, никакого информационного обмена не происходит. Если кадры отличаются лишь смещением какого-то объекта, выявляются границы этого объекта, направление и величина вектора его перемещения. Так как использование индивидуальных векторов перемещения для 
каждого пикселя слишком расточительно, используется общий вектор для блока пикселей 16*16 по яркости и для соответствующего блока 8*8 по цвету. Точность задания вектора перемещения обычно лежит в пределах 1/2 пикселя (стандарт MPEG-2). Только эта информация и передается по каналу связи. Выявление движущихся объектов осуществляется путем вычитания изображения двух последовательных 
кадров. Если бы передавалась всегда только разница кадров, происходило бы накопление ошибок. Кроме того, как кодер, так и декодер содержат прямой и обратный DCT-преобразователь. Если комбинация прямого и обратного DCT-преобразования не приводит к получению исходного объекта, то такого рода 
эффекты могут заметно усилиться. Для исключения этого время от времени производится передача непосредственно видеосигнала. Практически преобразователь изображения представляет чудо современной технологии, которое даст работу еще не одному поколению математиков и инженеров.</p>

<p align="justify">Нисколько не проще система передачи и мультиплексирования потока видео данных, который содержит помимо обычной информации описания формы движущихся объектов, векторы перемещения, коэффициенты дискретизации и многое другое. Схема передачи графической информации имеет 4-х уровневую, иерархическую структуру. Передача каждого кадра изображения  начинается с 20-битного кода PSC (Picture Start Code, эта сигнатура позволяет выделить начало кадра изображения в общем потоке), далее следует 5-битовый код TR (Temporal Reference, временная метка, которая позволяет поместить соответствующую часть изображения в правильную точку экрана). Изображение пересылается 
частями, имеется 4 уровня: кадр, группа блоков GoB</b> (Group of Blocks), макроблоки (MB) и просто блоки.</p>

<p align="justify">Ядро всей структуры составляет процедура передачи кадра (внутренний слой, существуют еще слои GoB, MB и блока, см. рис. 2.5.4, 2.5.5, 2.5.6)</p>

<p align="center"><img src="image83.gif" tppabs="http://book.itep.ru/2/25/image83.gif"></p>
<p align="center">Рис. 2.5.4.   Схема передачи кадра изображения</p>

<p align="justify">Поле <b>Ptype</b> содержит 6 бит, которые характеризуют формат изображения (используется ли формат CIF или QCIF). Однобитное поле <b>PEI</b> указывает на то, следует ли далее 8-битное поле <b>PSpare </b>(предназначено на будущее). Если PEI=0, начинается цикл передачи 
GoB. Группа блоков составляет одну двенадцатую картинки CIF или одну треть QCIF. GoB описывает Y (яркость), 176 пикселей для каждой из 48 строк и соответствующие 88*24 элементов для C<sub>B</sub> и C<sub>R</sub>.</p>

<p align="justify"><b>GBSC</b> - (Group of Blocks Start Code) представляет собой 16-разрядное слово, за которым следует 4 бита номера GoB (GN </b>- GoB number). GN указывает,  какой части изображения соответствует данный GoB. Поле <b>gquant</b> имеет 5 бит и указывает на номер преобразователя (одного из 31 дискретизаторов), который используется данным GoB. Смысл <b>GEI</b> 
идентичен <b>PEI</b>. GEI и GSpare позволяют сформировать структуру данных, идентичную той, что используется на уровне кадра.</p>

<p align="justify">Формат пересылки mb сложнее (см. <a href="literat.htm" tppabs="http://book.itep.ru/9/literat.htm"> [17]</a>). 
Каждый GoB делится на 33 макроблока (MB), каждый из которых соответствует 16 строкам по 16 пикселей Y (четыре блока 8*8) и C<sub>B</sub> и C<sub>R</sub>. Каждый макроблок начинается с его адреса <b>MBA</b> (MacroBlock Address), имеющего переменную длину и определяющего положение макроблока в GoB.</p>

<p align="center"><img src="image84.gif" tppabs="http://book.itep.ru/2/25/image84.gif"></p>
<p align="center">Рис. 2.5.5. Блок-схема кодирования и передачи изображения</p>

<p align="justify">Макроблоки не передаются, если данная часть изображения не изменилась. За MBA следует код переменной длины <b>Mtype</b>, характеризующий формат макроблока (применен ли метод подвижного вектора MVD и т.д.) и последующую информацию. <b>CBP</b> (Coded Block Pattern) представляет собой кодовое слово переменной длины, которое несет в себе информацию о том, какой из 
шести блоков преобразования (8*8) содержит коэффициенты (слой блоков). CBP нужно не для всех типов 
макроблоков. Каждый блок завершается флагом <b>EOB</b> (End of Block).</p>

<p align="center"><img src="image85.gif" tppabs="http://book.itep.ru/2/25/image85.gif"></p>
<p align="center">Рис. 2.5.6.  Размещение блоков в макроблоках</p>

<p align="justify">Сама природа алгоритма кодирования и передачи графических данных такова, что число бит передаваемых в единицу времени зависит от характера изображения. Чем динамичнее изменяется картинка, тем больше поток данных. Для выравнивания потока данных широко используется буферизация. Буферизация в свою очередь порождает дополнительные задержки, которые в случае 
видео-конференций или видео-телефонии не должны превышать нескольких сотен миллисекунд.</p>

<p align="justify">Так как при передаче изображения широко используются коды переменной длины, она крайне уязвима для любых искажений. В случае ошибки будет испорчена вся информация вплоть до следующего стартового кода GoB. Из-за рекурсивности алгоритма формирования картинки, искажения будут оставаться на экране довольно долго. Использование векторов перемещения может привести к 
дрейфу искажений по экрану и расширению их области. Для того чтобы уменьшить последствия искажений, в передаваемый информационный поток включаются коды коррекции ошибок BCH (511,493; Forward Error Correction Code), которые позволяют исправить любые две ошибки или кластер, содержащий до 6 ошибок 
в блоке из 511 бит (см. рис. 2.5.7). Алгоритм работает в широком диапазоне скоростей передачи информации. Для реализации коррекции ошибок в поток двоичных данных включается 8 пакетов, каждый из которых включает в себя 1 кадровый бит, 1 бит индикатор заполнения, 492 бита кодированных данных и 18 бит четности. Поле Fi (индикатор заполнения) может равняться нулю, тогда последующие 
492 бита не являются графической информацией и могут игнорироваться. Алгоритм предназначен для работы в динамическом диапазоне частот 40:1.</p>

<p align="center"><img src="image86.gif" tppabs="http://book.itep.ru/2/25/image86.gif"></p>
<p align="center">Рис. 2.5.7  Схема передачи данных с коррекцией ошибок</p>

<p align="justify">Во время переговоров или в ходе видеоконференции может возникнуть необходимость отобразить текст, выделить на экране какой-то объект, послать факс и т.д. Для решения таких задач можно использовать D-канал, но это не оптимально, так как он имеет свои специфические функции. Поэтому более привлекательным представляется создание специального протокола, работающего в рамках B-канала (H.221). Для этих целей используется младший бит каждого из октетов, что позволяет создать канал с пропускной способностью 8 Кбит/с. этот сервисный канал использует кадры по 80 бит. Первые 8 бит служат для целей синхронизации (FAS - Frame Alignment Signal) и выполняют следующие функции:</p>

<ul>
<li>выделение начала кадра (исключение имитации этого в информационном потоке);</li>
<li>выделение начала блока кадров (опционно до 16 кадров);</li>
<li>выполнение функций счетчика в многокадровых блоках (по модулю 16), может использоваться в многоточечных соединениях;</li>
<li>нумерация соединений;</li>
<li>CRC-контроль (опционно);</li>
<li>”A-бит” для определения кадр/мультикадр/синхронизация при пересылке в противоположном направлении (A=0 - передача, см. также <a href="isdn_433.htm" tppabs="http://book.itep.ru/4/43/isdn_433.htm"> структуру кадров isdn </a>);</li></ul>

<p align="justify">При работе с каналами на 384, 1536 и 1920 Кбит/с сервисный канал использует тайм-слот 1. Следующие 8 бит имеют название BAS (Bit Allocation Signal) и выполняют следующие функции:</p>

<ul>
<li>код, характеризующий возможности канала (узко/широко полосная передача звука, различные видео параметры, тип шифрования и т.д.);</li>
<li>коды команд, определяющие значения передаваемых кадров;</li>
<li>ESC-последовательности.</li></ul>

<p align="justify">Очевидно, что BAS-коды (H.242) должны быть надежно защищены от ошибок. Для этой цели они пересылаются с использованием кодов, допускающих коррекцию ошибок. При работе оба приемника непрерывно ищут разделительный код кадров. Когда он обнаружен, бит А для выходного канала делается равным нулю. Только после получения А=0 терминал может быть уверен в том, что удаленный терминал правильно воспринял код BAS. Работа с кодами BAS описана в документе H.242. При установлении режима обмена терминалы обмениваются командами BAS. Команда действительна для последующих двух кадров, следовательно, при частоте кадров 100 Гц, изменения режима могут производиться каждые 20 мс.</p>

<p align="justify">Многоточечный вызов может рассматриваться как несколько связей между терминалами и бриджом MCU (Multipoint Control Unit) по схеме точка-точка. Простой MTU передает на каждый из терминалов смешанный аудио-сигнал от остальных терминалов. Каждый терминал осуществляет широковещательную передачу для остальных терминалов, участвующих в обмене. При видео обмене на терминал выводится только одна картинка. Дополнительную информацию по данной тематике можно найти в рекомендациях H.231, H242 и H.243.</p>

<p align="justify">Для передачи нормального телевизионного изображения необходимо 364 Кбит/с (4х64 Кбит/c). Интеграция телевидения с сетями передачи данных, появление видеотелефона и широкое внедрение видеоконференций становится велением времени. Требования к каждому из этих видов услуг варьируется значительно в зависимости от приложения. Например, ставшие обычными телевизионные мосты требуют высокого качества передачи изображения и звука. А в некоторых дорогостоящих отраслях науки, где международное сотрудничество стало неизбежным, важным является передача статических изображений (чертежи, схемы, описания алгоритмов, и т.д.) с высоким (иногда более высоким, чем в 
телевидении) разрешением. Здесь важно передать звук с приемлемым качеством (но заметно хуже, чем на ТВ) и обеспечить синхронное перемещение маркера мыши по экрану в ходе обсуждения переданного документа. Экономия только на авиа билетах (не говоря о командировочных и времени экспертов) способна перекрыть издержки по оплате канала для видеоконференции. В этом режиме приемлемым может 
считаться один кадр в 1-4 секунды.</p>

<p align="justify">Рисунок известного французского художника Клода Серрэ из книги “Черный юмор и люди в белом” (см. начало раздела) может служить иллюстрацией того, к чему может привести использование протокола tcp при передаче изображения в реальном масштабе времени. Предположим, что 
в процессе передачи изображения носа пакеты были повреждены, тогда спустя некоторое время, определяемое размером окна (TCP), будет проведена повторная их передача. Тем временем переданные ранее пакеты будут использованы для построения изображения, а часть картинки, содержавшаяся в пакетах, посланных вместо поврежденных, будет отображена совсем не там, где это следует. Реально 
из-за повреждения пакетов возможны в этой версии и более тяжелые искажения изображения. Именно это является причиной использования UDP для передачи видео и аудио информации при видео и аудио конференциях (еще лучшего результата можно достичь, использую протокол RTP). Протокол UDP не требует подтверждения и повторной передачи при ошибке доставки. Поврежденные пакеты вызовут 
искажения изображения (или звука) лишь локально.</p>

<p align="justify">Ситуация меняется в случае посылки изображения или звукового послания по электронной почте. Здесь в случае повторной передачи пакетов в конечном итоге будет сформирован файл, уже не содержащий ошибок. Такое решение приемлемо всякий раз, когда большая задержка появления изображения или звука не играет никакой роли.</p>

<p align="center"><b>Стандарт MPEG</b></p>

<p align="justify">Стандарт MPEG-2 является усовершенствованием MPEG-1 и базируется на схеме шифрования с потерями и передачи без потерь. Кодирование в MPEG-2 идентично используемому в MPEG-1 (I- P- и B-кадры; В-кадры не используются). I-кадр (Intracoded) представляет собой изображение, закодированное согласно стандарту JPEG при полном разрешении по яркости и половинном разрешении по цвету. Такие кадры должны появляться периодически. Эти кадры обеспечивают совместимость с MPEG-1, и исключают влияние накопления ошибок в процессе передачи. P-кадры (Predictive) содержат отличие блоков в последнем кадре изображения (базируются на идее макроблоков). B-кадры (Bidirectional) характеризуют отличие двух последовательных изображений. Здесь применено двойное косинусное преобразование с числом коэффициентов 10*10 (против 8*8 в MPEG-1). MPEG-2 предназначен для широковещательного 
телевидения (включая прямое спутниковое - DBS) и для записи на CD-ROM и поддерживает четыре разных стандартов разрешения: 352*240 (низкое), 720*480 (базовое), 1440*1152 (высокое-1440) и 1920*1080 (высокое). Низкое разрешение служит для обеспечения совместимости с MPEG-1. Базовое разрешение 
ориентировано на работу со стандартом NTSC. Последние два стандарта относятся к телевидению высокого разрешения (HDTV). Помимо этого MPEG-2 поддерживает 5 профайлов для различных прикладных областей. <i>Основной профайл</i> ориентирован на общие приложения с базовым разрешением. <i>Простой профайл</i> сходен с основным профайлом, но не работает с B-кадрами, чтобы облегчить 
процедуры кодирования/декодирования. Остальные профайлы служат для обеспечения масштабируемости и работы с HDTV, они отличаются цветовым разрешением и форматами информационных потоков. Скорость передачи данных для каждой комбинации разрешения и профайла различна и лежит в диапазоне от 3 до 
100 Мбит/c. Для обычного ТВ характерна скорость 3-4 Мбит/c. В таблице 2.5.2 представлены размеры кадров в битах для MPEG-1 и MPEG-2.</p>

<p align="center">Таблица 2.5.2. Размеры кадров MPEG-1 и MPEG-2</p>

<center><table border=10 cellspacing=1 cellpadding=5 width=700 bgcolor="ghostwhite">
<tr><td width="31%" valign="top" rowspan=2 bgcolor="gainsboro"> </td>
<td width="69%" valign="top" colspan=4 bgcolor="gainsboro"><p align="center">Тип кадра</td>
</tr>
<tr><td width="17%" valign="top"><p align="center">i</td>
<td width="17%" valign="top"><p align="center">p</td>
<td width="17%" valign="top"><p align="center">b</td>
<td width="17%" valign="top"><p align="center">Средний</td>
</tr>
<tr><td width="31%" valign="top"><p>mpeg-1 (1,15 Мбит/с)</td>
<td width="17%" valign="top"><p align="center">150,000</td>
<td width="17%" valign="top"><p align="center">50,000</td>
<td width="17%" valign="top"><p align="center">20,000</td>
<td width="17%" valign="top"><p align="center">38,000</td>
</tr>
<tr><td width="31%" valign="top"><p>mpeg-2 (4 Мбит/c)</td>
<td width="17%" valign="top"><p align="center">400,000</td>
<td width="17%" valign="top"><p align="center">200,000</td>
<td width="17%" valign="top"><p align="center">80,000</td>
<td width="17%" valign="top"><p align="center">130,000</td>
</tr>
</table></center>

<p align="justify">Мультиплексирование аудио- и видеоданных в MPEG-2 показано на рис. 2.5.8. На выходе пакетизатора мы имеем элементарные потоки пакетов (PES- Packetized Elementary Stream), содержащих около 30 полей, включая длину, идентификаторы потоков, временные метки, контрольные суммы и т.д. В MPEG-2 формируется два комплексных потока, <i>программный поток (PS)</i> длинных 
пакетов переменной длины сходный с MPEG-1, содержащий видео и аудио данные и имеющий общую временную шкалу, и <i>транспортный поток (TS)</i> пакетов постоянной длины (188 байт) без общей временной шкалы. В последнем случае минимизируется влияние потерь пакетов в процессе транспортировки. 
Предусмотрено выделение в потоке составляющих разной степени важности (например, DCT-коэффициентов и обычных графических данных).</p>

<p align="center"><img src="mpeg2.jpg" tppabs="http://book.itep.ru/2/25/mpeg2.jpg"></p>
<p align="center">Рис. 2.5.8.  Мультиплексирование аудио и видео данных в MPEG-1 и MPEG-2 (внизу)</p>

<p align="justify">Преобразование аналогового сигнала в цифровую последовательность осуществляется в MPEG-2 с помощью кодеков, создавая первичный поток в 140 Мбит/с, который затем преобразуется для передачи через стандартные каналы 1,5 и 15 Мбит/с (например, для прямого широковещательного, 
спутникового телевидения). В соответствии со стандартом сжатия данных H.320 можно обеспечить передачу видео + аудио по каналу 56 кбит/с с низким разрешением и частотой 1 кадр/сек. Смотри раздел <a href="v_con_29.htm" tppabs="http://book.itep.ru/2/29/v_con_29.htm">"Видеоконференции по каналам isdn и Интернет"</a>.

<p align="center"><b>Интерактивное телевидение</b></p>

<p align="justify">В последнее время благодаря широкому внедрению цифрового телевидения и новых стандартов передачи изображения (MPEG-2) открылись возможности для "телевидения по требованию" (интерактивного телевидения) - системы, где клиент может самостоятельно и индивидуально формировать ТВ-программу. Первые опыты такого рода относятся к 1995 году. Такие системы базируются на существующих сетях кабельного телевидения. Но развитие оптоволоконных технологий позволяют ожидать полной интеграции кабельного цифрового телевидения и информационных сетей Интернет. Общая схема такой системы показана на рис. 2.5.9.</P>
  
<p align="center"><img src="m_media.jpg" tppabs="http://book.itep.ru/2/25/m_media.jpg"></P>
<P ALIGN="CENTER">Рис. 2.5.9.  Схема реализации интерактивного телевидения</P>

<P ALIGN="JUSTIFY">Базовый мультимедийный сервер может обслуживать отдельный район города. В пределах квартала размещается промежуточный центр, где размещается локальный буферный сервер, где записываются фрагменты программ, заказанные локальными клиентами. Только новостийные и некоторые спортивные 
программы передаются в реальном в реальном масштабе времени, все фильмы берутся из локальной фильмотеки или предварительно записываются в накопитель из центрального мультимедиа-сервера. Транспортной средой здесь может стать ATM, SDH или Fibre Channel. Оптическое волокно доходит до квартального сервера или даже до дома клиента. В этом случае по имеющимся каналам может передаваться не только программа телевидения и осуществляться телефонные переговоры, но выполняться полное информационное обслуживание. Сюда может включаться, помимо заказа ТВ-программ, подписка на газеты, заказ билетов на транспорт или в театр, получение прогноза погоды и данных о состоянии дорог, доступ к базам данных, включая библиотеки и фонотеки и многое другое. Особый интерес представляет возможность практически полного вытеснения традиционных газет. Клиент сможет получать только интересующие его статьи из любых газет (и только их и оплачивать). Если какая-то статья его заинтересует и он захочет почитать ее позднее в машине или на даче, он сможет ее распечатать на принтере, подключенном к его телевизору-терминалу. Цены на цветные принтеры в настоящее время спустились почти до 100 долларов, таким образом нужная копия уже сейчас дешевле стоимости газеты. Экономия на бумаге и средствах доставки очевидны, да и необходимость в типографиях отпадет, ведь даже книги можно будет получить непосредственно дома (хотя привлекательность данной услуги и не вполне очевидна - хорошо сброшированная и переплетенная книга будет привлекательным объектом еще долго (прогноз относительно будущих книг сотри в разделе <A HREF="concl.htm" tppabs="http://book.itep.ru/8/concl.htm">"Заключение"</A>). Массовое внедрение таких технологий будет стимулировать падение цен на соответствующие процессоры и принтеры. Интерактивная схема подключения телевизора-терминала сделает возможным многие новые виды развлечений, а также выполнение многих покупок, не выходя из дома. Традиционной почте подписала отсроченный приговор почта электронная, но появление интерактивных широкополосных средств завершит многовековую историю почты (да и телеграфа). Ей будет оставлена доставка товаров, билетов и 
документов. Побочным продуктом прогресса в данной области станет общедоступный видеотелефон.</P>

<P ALIGN="JUSTIFY">В жилье клиента будет входить оптоволоконный кабель, завершающийся интерфейсной коробкой с разъемами для подключения телефона, телевизора и ЭВМ. Даже современные ограниченные скорости передачи позволяют решить стоящие проблемы. Во-первых люди не смотрят телевизор круглые сутки, это позволяет ночью или в рабочее время, когда клиент на службе, произвести передачу нужных фрагментов ТВ-программы на локальный сервер. Во-вторых популярность фильмов и программ не однородна, что также снижает требование на широкополосность. Известно, что наиболее популярный фильм запрашивается примерно в К раз чаще, чем фильм, занимающий к-ое место в списке популярности 
(эмпирический закон Ципфа (Zipf), выведенный из статистики контор по прокату видеокассет). Это означает, что из предлагаемого списка будут выбраны не все фильмы, а наиболее популярные фрагменты программ можно передавать по схеме <A HREF="mbn_4491.htm" tppabs="http://book.itep.ru/4/44/mbn_4491.htm">MBONE</A>, минимизируя загрузку каналов (смотри также <A HREF="pim_4495.htm" tppabs="http://book.itep.ru/4/44/pim_4495.htm"> описание протокола PIM</A>). 
Способствовать решению данной проблемы будет и появление CD с емкостью 4 Гбайта. Но проблем здесь остается немало, так трудно себе представить, что все клиенты захотят смотреть один и тот же фильм в одно время. Решение подобной задачи потребует очень большого объема буферной памяти и ощутимо поднимет требования к широкополосности канала. "Синхронизовать" клиентов можно будет 
дифференциацией оплаты для разных временных интервалов, и группированием клиентов, заказавших близкие времена начала демонстрации фильмов. Но несмотря на все эти ухищрения, локальные серверы должны будут иметь сложную иерархическую систему буферной памяти, базирующейся на разных принципах 
работы (CD, магнитная лента, дисковая память и даже RAM).</P>
 
<P ALIGN="JUSTIFY">Практическая реализация фантастической схемы, предложенной в предыдущем абзаце, уже осуществляется в США и Канаде. Здесь есть немало проблем, например, нужен дешевый широкополосный кабельный модем (смотри раздел <A HREF="mod_437.htm" tppabs="http://book.itep.ru/4/43/mod_437.htm">"Модемы"</A>, там же приведена схема 
подключения телевизора-терминала через кабельный модем). Предстоит написать огромное число различных сервисных программ, но все базовые технологии уже существуют.</P>












</TD></TR>

<TR bgcolor="steelblue"><TD VALIGN="TOP" bgcolor="steelblue" LINK="#0000FF"><P ALIGN="center">

<FONT color="white"><B> Previous: </B></FONT>
<A HREF="voic_243.htm" tppabs="http://book.itep.ru/2/24/voic_243.htm"><FONT COLOR="lightblue">2.4.3 Передача голоса по каналам Интернет</FONT></A>



<FONT color="white"><B> &nbsp; &nbsp;UP:</B></FONT>
<A HREF="sound_24.htm" tppabs="http://book.itep.ru/2/24/sound_24.htm"><FONT COLOR="lightblue">2.4 Методы    преобразования и передачи звуковых сигналов</FONT></A>


<BR>

<FONT color="white"><B>  Down:</B></FONT>
<A HREF="comp_26.htm" tppabs="http://book.itep.ru/2/26/comp_26.htm"><FONT COLOR="lightblue">2.6 Методы сжатия информации</FONT></A>



<FONT color="white"><B> &nbsp; &nbsp;Next:</B></FONT>
<A HREF="mpeg-4R.htm" tppabs="http://book.itep.ru/2/25/mpeg-4R.htm"><FONT COLOR="lightblue">2.5.1 Стандарт MPEG-4</FONT></A>

</TD>
  </TR>
</table>
</BODY>
</HTML>